(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],h=0,d=[];h<r.length;h++)i=r[h],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/census-analysis-flow/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1227:function(t,e,a){},2049:function(t,e,a){},"3b6e":function(t,e,a){"use strict";a("9348")},"42c5":function(t,e,a){"use strict";a("c8fd")},"525d":function(t,e,a){"use strict";a("1227")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("8c4f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"app",attrs:{id:"app","data-route":t.$router.currentRoute.name,"data-path":t.$router.currentRoute.path.replace(/^\/|\/$/g,"")}},[a("div",{ref:"top",staticClass:"c-hero__intersect"}),a("main",{staticClass:"c-main",attrs:{id:"main",role:"main"}},[a("router-view")],1)])},i=[],r={name:"app",mounted:function(){window.addEventListener("keydown",this.onkeydown)},beforeDestroy:function(){window.removeEventListener("keydown",this.onkeydown)},methods:{onkeydown:function(t){70===t.keyCode&&t.shiftKey&&(this.fs?(this.fs=!1,document.exitFullscreen()):(this.fs=!0,document.body.requestFullscreen()))}}},c=r,l=(a("525d"),a("2877")),u=Object(l["a"])(c,o,i,!1,null,null,null),h=u.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-home"},[a("img",{staticClass:"bg",attrs:{src:"/bg/home.png"}}),t._l(t.list,(function(e,n){return a("h2",{key:e.max,staticClass:"n",class:"n"+(n+1)},[t._v(t._s(t.localise(e.total)))])})),a("div",{staticClass:"img"},[t.img%3==0?a("img",{attrs:{src:"/bg/analysis-img-01-sml.jpg"}}):t._e(),t.img%3==1?a("img",{attrs:{src:"/bg/analysis-img-02-sml.jpg"}}):t._e(),t.img%3==2?a("img",{attrs:{src:"/bg/analysis-img-03-sml.jpg"}}):t._e()]),a("router-link",{attrs:{to:{name:"analysis"}}},[a("span",[t._v("Go")])]),a("div",{staticClass:"refresh",on:{click:function(e){++t.img}}},[a("img",{attrs:{src:"/refresh.svg",draggable:"false"}}),a("br"),t._v("Next image ")])],2)},m=[],f=(a("4160"),a("13d5"),a("b680"),a("159b"),{name:"Home",data:function(){return{img:0,duration:1e3,list:[{total:0,max:5500},{total:0,max:550},{total:0,max:75},{total:0,max:100}]}},methods:{easeOutQuad:function(t){return t*(2-t)},start:function(){this.r=performance.now(),this.increment()},increment:function(){var t=this;cancelAnimationFrame(this.af);var e=Math.min(1,(performance.now()-this.r)/this.duration);this.list.forEach((function(a){var n=Math.min(1,e/(Math.pow(a.max,1/3)/t.max));a.total=a.max*t.easeOutQuad(n)})),e<1&&(this.af=requestAnimationFrame(this.increment))},localise:function(t){return t>1e3?(t/1e3).toFixed(1)+"k":Math.round(t)}},mounted:function(){this.max=this.list.reduce((function(t,e){return Math.max(Math.pow(e.max,1/3),t)}),0),setTimeout(this.start,1e3)}}),p=f,v=(a("42c5"),Object(l["a"])(p,d,m,!1,null,"ac57aefa",null)),g=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-analysis",attrs:{"data-tracing":t.tracing,"data-complete":t.complete}},[a("img",{staticClass:"bg",attrs:{src:"/bg/analysis-img-03.jpg"}}),a("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:"1920",height:"1080"},on:{mousedown:t.onmovestart}}),a("nav",[t._m(0),a("div",{staticClass:"nav-right"},[a("label",{staticClass:"next",on:{click:function(e){t.next=!0}}},[a("span",[t._v("Done")])])]),a("div",{staticClass:"nav-bottom"},[a("ul",{staticClass:"types"},t._l(t.types,(function(e,n){return a("li",{key:e.colour},[a("input",{ref:"types",refInFor:!0,attrs:{id:"types-"+n,name:"types",type:"radio"},domProps:{value:n},on:{change:function(e){return t.onselect(n)}}}),a("label",{style:{color:e.colour},attrs:{for:"types-"+n,"data-colour":e.colour}},[a("img",{attrs:{src:"/icons/"+n+".svg"}}),a("span",[t._v(t._s(e.label||n.charAt(0).toUpperCase()+n.slice(1)))])])])})),0)])]),t.next?a("div",{staticClass:"overlay"},[a("div",{staticClass:"overlay--inner"},[a("img",{attrs:{src:"/icons/tick.svg"}}),a("h2",[t._v("Analysis Received")]),a("p",[t._v("You’re now officially a Reef Citizen Scientist. Check out your progress on your dashboard or keep on going.")]),a("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("View dashboard")]),a("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Next image")])],1)]):t._e()])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-left"},[a("img",{staticClass:"tools",attrs:{src:"/icons/tools.svg"}})])}],w=(a("99af"),a("cb29"),a("4de4"),a("a15b"),a("fb6a"),a("d3b7"),a("25f0"),a("4d90"),{name:"Analysis",data:function(){return{next:!1,complete:!1,active:null,tracing:!1,imageRatio:1,colour:null,trace:[],types:{coral:{colour:"#87d0f7"},rubble:{colour:"#ffc3ac"},monument:{colour:"#cbcfff",label:"Coral monument"},sand:{colour:"#ffeab6",label:"Sand cover"},unsure:{colour:"#ffb9cd",label:"Don’t know?"}}}},mounted:function(){window.addEventListener("keydown",this.onkeydown),window.addEventListener("keyup",this.onkeyup),this.$refs.types[0].checked=!0,this.onselect("coral")},beforeDestroy:function(){window.removeEventListener("keydown",this.onkeydown),window.removeEventListener("keyup",this.onkeyup)},methods:{onclear:function(t){var e=this;this.trace=t?this.trace.filter((function(t){return t.slice(-1)[0].type!==e.active})):[],this.imagetrace(!!t)},onkeydown:function(){},keyup:function(){},onselect:function(t){this.active=t,this.imageRatio=this.$refs.canvas.width/this.$refs.canvas.offsetWidth;var e=20/this.imageRatio,a=document.createElement("canvas");a.width=e,a.height=e;var n=a.getContext("2d");n.beginPath(),n.arc(e/2,e/2,e/2,0,2*Math.PI),n.closePath(),n.fillStyle="".concat(this.types[this.active].colour,"80"),n.fill(),this.$refs.canvas.style.cursor="url(".concat(a.toDataURL("image/png"),") ").concat(e/2," ").concat(e/2,", auto"),this.imagetrace(!0)},onmove:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.trace.slice(-1)[0].push([Math.max(0,Math.min(t.pageX*this.imageRatio,1920)),Math.max(0,Math.min(t.pageY*this.imageRatio,1080))]),e&&this.imagetrace()},onmovestart:function(t){this.tracing||(this.tracing=!0,this.trace.push([]),this.onmove(t,!1),this.imageRatio=this.$refs.canvas.width/this.$refs.canvas.offsetWidth,window.addEventListener("mousemove",this.onmove),window.addEventListener("mouseup",this.onmoveend))},onmoveend:function(){this.tracing=!1,this.trace.slice(-1)[0].push({colour:this.types[this.active].colour,type:this.active}),window.removeEventListener("mousemove",this.onmove),window.removeEventListener("mouseup",this.onmoveend),this.imagetrace(!0)},imagetrace:function(t){var e=this,a=this.$refs.canvas.getContext("2d");if(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.lineWidth=20,a.lineJoin="round",a.lineCap="round",this.trace.forEach((function(n,s){var o=!t&&s===e.trace.length-1,i=o?{colour:e.types[e.active].colour}:Object.assign({},n.slice(-1)[0]);a.beginPath(),n.forEach((function(t,e){(e<n.length-1||o)&&(e?a.lineTo(t[0],t[1]):a.moveTo(t[0],t[1]))})),a.lineWidth=20,a.strokeStyle=i.colour,t||!o?(a.save(),i.erase&&(a.globalCompositeOperation="destination-out"),a.closePath(),a.stroke(),a.fillStyle=i.colour,a.fill(),a.restore()):(a.save(),i.erase&&(a.globalCompositeOperation="destination-out"),a.stroke(),a.restore(),a.lineWidth=2,a.setLineDash([5,5]),a.save(),i.erase?a.strokeStyle=i.colour:(a.globalCompositeOperation="destination-out",a.strokeStyle="#FFFFFF"),a.stroke(),a.restore())})),t){var n=document.createElement("canvas");n.width=100,n.height=n.width*a.canvas.height/a.canvas.width;var s=n.getContext("2d");s.drawImage(this.$refs.canvas,0,0,n.width,n.height);for(var o,i=s.getImageData(0,0,n.width,n.height),r=i.data,c=r.length/4,l={},u=0,h=0;h<c;++h)r[4*h+3]&&(o=r.slice(4*h,4*h+3).reduce((function(t,e){return t.concat(e.toString(16).padStart(2,"0"))}),[]).join(""),l["#".concat(o)]=(l["#".concat(o)]||0)+1,++u);this.complete=u/c>.5}}}}),_=w,k=(a("a445"),Object(l["a"])(_,y,b,!1,null,"15f60547",null)),x=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-dashboard",attrs:{"data-ready":t.ready,"data-centered":t.centered}},[a("video",{ref:"video",attrs:{src:"/video/mapzoom.mp4",autoplay:""},on:{timeupdate:t.onvideo}}),a("img",{staticClass:"bg",attrs:{src:"/bg/dashboard.png"}}),a("h1",{staticClass:"score"}),t._m(0),t._m(1),a("div",{staticClass:"next"},[a("router-link",{attrs:{to:{name:"share"}}},[t._v("Next image")]),a("router-link",{attrs:{to:{name:"share"}}},[a("svg",{attrs:{"aria-label":"Share Post",height:"24",viewBox:"0 0 48 48",width:"24"}},[a("path",{attrs:{d:"M47.8 3.8c-.3-.5-.8-.8-1.3-.8h-45C.9 3.1.3 3.5.1 4S0 5.2.4 5.7l15.9 15.6 5.5 22.6c.1.6.6 1 1.2 1.1h.2c.5 0 1-.3 1.3-.7l23.2-39c.4-.4.4-1 .1-1.5zM5.2 6.1h35.5L18 18.7 5.2 6.1zm18.7 33.6l-4.4-18.4L42.4 8.6 23.9 39.7z"}})]),t._v(" Spread the word")])],1)])},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image"},[a("img",{attrs:{src:"/bg/analysis-img-03-sml.jpg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"badge"},[a("img",{attrs:{src:"/icons/badge.svg"}})])}],E={name:"Dashboard",data:function(){return{ready:!1,centered:!1}},methods:{onvideo:function(t){this.centered=t.target.currentTime>7.5}},mounted:function(){var t=this;setTimeout((function(){t.ready=!0}),2e3)}},O=E,j=(a("8f89"),Object(l["a"])(O,C,$,!1,null,"f558e5a0",null)),S=j.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-share",attrs:{"data-ready":t.ready}},[a("router-link",{attrs:{to:{name:"home"}}},[a("span",[t._v("Start again")])])],1)},P=[],L={name:"Share",data:function(){return{ready:!1}},mounted:function(){var t=this;setTimeout((function(){t.ready=!0}),1e3)}},F=L,R=(a("3b6e"),Object(l["a"])(F,M,P,!1,null,"43639c5d",null)),D=R.exports,T=a("5f35");n["a"].use(s["a"]);var A=[{name:"home",path:"/",component:g},{name:"analysis",path:"/analysis",component:x},{name:"dashboard",path:"/dashboard",component:S},{name:"share",path:"/share",component:D}],W=new s["a"]({base:T["baseUrl"],mode:"history",routes:A,scrollBehavior:function(t){return t.hash?{selector:t.hash}:{x:0,y:0}},linkActiveClass:"is-active"}),z=W;n["a"].use(s["a"]),n["a"].config.productionTip=!1,new n["a"]({router:z,el:"#app",template:"<App/>",components:{App:h},render:function(t){return t(h)}}).$mount("#app")},"5f35":function(t,e){t.exports={outputDir:"../public",publicPath:"/census-analysis-flow/",configureWebpack:{resolve:{alias:{$asset:"@/assets",$component:"@/vue/components",$config:"@/config",$mixin:"@/vue/mixins",$page:"@/vue/pages",$plugin:"@/vue/plugins",$style:"@/styles",$util:"@/utils",$vue:"@/vue"}}},devServer:{port:"10443",https:{key:"/Users/som/.ssh/localhost+4-key.pem",cert:"/Users/som/.ssh/localhost+4.pem"}}}},"8f89":function(t,e,a){"use strict";a("2049")},9348:function(t,e,a){},a445:function(t,e,a){"use strict";a("f753")},c8fd:function(t,e,a){},f753:function(t,e,a){}});
//# sourceMappingURL=app.6987cf5f.js.map